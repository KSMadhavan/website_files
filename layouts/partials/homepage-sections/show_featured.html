<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>
<script type="text/javascript">

    $('.responsive').slick({
        dots: true,
        infinite: false,
        speed: 300,
        slidesToShow: 4,
        slidesToScroll: 4,
        responsive: [
            {
                breakpoint: 1024,
                settings: {
                    slidesToShow: 3,
                    slidesToScroll: 3,
                    infinite: true,
                    dots: true
                }
            },
            {
                breakpoint: 600,
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 2
                }
            },
            {
                breakpoint: 480,
                settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1
                }
            }
            // You can unslick at a given breakpoint now by adding:
            // settings: "unslick"
            // instead of a settings object
        ]
    });

</script>

<body>
{{range $index, $element := $.Site.Params.featured_pages.sections}}
    <section id="show_featured_{{.name}}" class="home-section">
        <div class="container">
            <!-- Contact widget -->
            <div class="row">
                {{if isset (index $.Site.Params.featured_pages.sections $index) "title"}}
                <div class="col-lg-12 text-center">
                    <h1 class="heading"  style="color: {{.title_color}}">{{.title | humanize}}</h1>
                </div>
                {{ end }}
                {{if isset (index $.Site.Params.featured_pages.sections $index) "subtitle"}}
                <div class="col-lg-12 text-center">
                    <h2 class="subheading" style="color: {{.subtitle_color}}">{{.subtitle}}</h2>
                </div>
                {{ end }}
            </div>
            <div class="row flexbox">
                {{   $.Scratch.Set "num_featured" .num_featured }}
                {{ range first .num_featured (sort  (where (where $.Data.Pages "Section" .name) "Params.featured" true) .sort_field .sort_order)}}
                    <div class="col-md-{{cond (le ($.Scratch.Get "num_featured") 6) (div 12 ($.Scratch.Get "num_featured")) 3}} col-sm-2 col responsive"
                         style = "padding-top: 1rem;text-align:center">
                        <a href="{{.Permalink}}">
                            <img src="/img/{{.Params.caption_image}}" class="img-responsive img-centered" alt="{{.Title}}">
                        </a>
                        <h4>{{.Params.title}}</h4>
                        <p>{{ .Summary }}</p>
                    </div>
                {{end}}
            </div>

        </div>
    </section>
{{end}}
</body>
